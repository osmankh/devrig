{
  "id": "gmail",
  "name": "Gmail",
  "version": "0.1.0",
  "description": "Gmail integration â€” sync emails, AI classification, draft replies, and inbox actions",
  "author": { "name": "DevRig", "url": "https://devrig.dev" },
  "auth": { "type": "oauth", "providerId": "gmail" },
  "permissions": {
    "network": ["*.googleapis.com"],
    "secrets": ["gmail_oauth_token", "gmail_refresh_token"],
    "ai": true
  },
  "preferences": [
    {
      "id": "sync_interval_ms",
      "label": "Sync Interval",
      "type": "select",
      "description": "How often to sync emails from Gmail",
      "default": "300000",
      "options": [
        { "label": "1 minute", "value": "60000" },
        { "label": "5 minutes", "value": "300000" },
        { "label": "15 minutes", "value": "900000" },
        { "label": "1 hour", "value": "3600000" }
      ]
    },
    {
      "id": "auto_classify",
      "label": "Auto-classify emails",
      "type": "toggle",
      "description": "Automatically classify emails after each sync",
      "default": true
    },
    {
      "id": "draft_tone",
      "label": "Draft reply tone",
      "type": "select",
      "description": "Tone used when AI drafts email replies",
      "default": "professional",
      "options": [
        { "label": "Professional", "value": "professional" },
        { "label": "Casual", "value": "casual" },
        { "label": "Concise", "value": "concise" },
        { "label": "Detailed", "value": "detailed" }
      ]
    },
    {
      "id": "max_emails_per_sync",
      "label": "Max emails per sync",
      "type": "select",
      "description": "Maximum number of emails to fetch per sync cycle",
      "default": "50",
      "options": [
        { "label": "25", "value": "25" },
        { "label": "50", "value": "50" },
        { "label": "100", "value": "100" },
        { "label": "200", "value": "200" }
      ]
    },
    {
      "id": "auto_archive_noise",
      "label": "Auto-archive noise",
      "type": "toggle",
      "description": "Automatically archive items classified as noise",
      "default": false
    }
  ],
  "capabilities": {
    "dataSources": [
      {
        "id": "emails",
        "name": "Gmail Emails",
        "entryPoint": "src/index.js",
        "syncInterval": 60,
        "description": "Syncs emails from Gmail inbox using historyId-based incremental sync"
      }
    ],
    "actions": [
      {
        "id": "reply",
        "name": "Reply to Email",
        "entryPoint": "src/index.js",
        "description": "Send a reply to an email thread",
        "parameters": {
          "itemId": { "type": "string", "description": "Inbox item ID", "required": true },
          "body": { "type": "string", "description": "Reply body text", "required": true }
        }
      },
      {
        "id": "archive",
        "name": "Archive Email",
        "entryPoint": "src/index.js",
        "description": "Remove email from inbox (archive)",
        "parameters": {
          "itemId": { "type": "string", "description": "Inbox item ID", "required": true }
        }
      },
      {
        "id": "label",
        "name": "Apply Label",
        "entryPoint": "src/index.js",
        "description": "Apply a Gmail label to a message",
        "parameters": {
          "itemId": { "type": "string", "description": "Inbox item ID", "required": true },
          "labelId": { "type": "string", "description": "Gmail label ID", "required": true }
        }
      }
    ],
    "aiPipelines": [
      {
        "id": "classify-emails",
        "name": "Classify Emails",
        "entryPoint": "src/index.js",
        "trigger": "onNewItems",
        "description": "AI-classify emails as important, needs_reply, fyi, or noise"
      },
      {
        "id": "draft-reply",
        "name": "Draft Reply",
        "entryPoint": "src/index.js",
        "trigger": "onAction",
        "description": "AI-generate a draft reply for an email"
      }
    ]
  }
}
